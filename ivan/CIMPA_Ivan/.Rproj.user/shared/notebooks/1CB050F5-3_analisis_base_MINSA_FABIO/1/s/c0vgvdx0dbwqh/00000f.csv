"0","df1_Dengue_15_20 = read_excel(path = here(""2. Data"", ""base_fabio_dengue.xlsx""), sheet = 5)"
"0",""
"0","df1_Dengue_15_20 = df1_Dengue_15_20 %>% "
"0","  pivot_longer(cols = 2:83, names_to = ""Canton"", values_to = ""Conteo"") %>% "
"0","  mutate("
"0","    COD_CANTON = str_extract(Canton, ""(?<=_)\\d+(?=_)""), # Extrae el valor numérico entre los guiones bajos"
"0","    CANTON = str_extract(Canton, ""(?<=_)[^_]+$"") # Extrae el valor después del segundo guion bajo"
"0","  ) %>% "
"0","  select(Year, COD_CANTON, CANTON, Conteo) %>% "
"0","  mutate("
"0","    COD_CANTON = case_when("
"0","      is.na(COD_CANTON) ~ ""99"","
"0","      TRUE ~ COD_CANTON"
"0","    )"
"0","  ) %>% "
"0","  mutate("
"0","    CANTON = case_when("
"0","      is.na(CANTON) ~ ""PAIS"","
"0","      TRUE ~ CANTON"
"0","    )"
"0","  ) %>%"
"0","  mutate("
"0","    Year = as.numeric(Year)"
"0","  ) %>% "
"0","  mutate("
"0","    PROVINCIA = case_when("
"0","      str_starts(COD_CANTON, ""1"") ~ ""San José"","
"0","      # Agrega más condiciones aquí para otros casos"
"0","      str_starts(COD_CANTON, ""2"") ~ ""Alajuela"","
"0","      str_starts(COD_CANTON, ""3"") ~ ""Cartago"","
"0","      str_starts(COD_CANTON, ""4"") ~ ""Heredia"","
"0","      str_starts(COD_CANTON, ""5"") ~ ""Guanacaste"","
"0","      str_starts(COD_CANTON, ""6"") ~ ""Puntarenas"","
"0","      str_starts(COD_CANTON, ""7"") ~ ""Limón"","
"0","      str_starts(COD_CANTON, ""99"") ~ ""País"","
"0","      TRUE ~ NA_character_ # Si no coincide, asigna NA"
"0","    )"
"0","  ) %>% "
"0","  select(Year, PROVINCIA, COD_CANTON, CANTON, Conteo)"
